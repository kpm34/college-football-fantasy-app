name: Big 12 Data Seeder

on:
  schedule:
    # Run once at script start (manual trigger for now)
    - cron: '0 0 1 8 *'  # August 1st at midnight UTC
  workflow_dispatch: # Allow manual triggers
  push:
    paths:
      - 'src/scripts/create-kash-database.js'
      - 'src/scripts/add-bigten-teams-data.js'

jobs:
  seed-big12-data:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Set up Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        cache: 'npm'
        
    - name: Install dependencies
      run: |
        npm install node-appwrite
        
    - name: Run Big 12 data seeder
      env:
        CFBD_API_KEY: ${{ secrets.CFBD_API_KEY }}
        ODDS_API_KEY: ${{ secrets.ODDS_API_KEY }}
        ROTOWIRE_API_KEY: ${{ secrets.ROTOWIRE_API_KEY }}
        APPWRITE_ENDPOINT: ${{ secrets.APPWRITE_ENDPOINT }}
        APPWRITE_PROJECT_ID: ${{ secrets.APPWRITE_PROJECT_ID }}
        APPWRITE_API_KEY: ${{ secrets.APPWRITE_API_KEY }}
      run: |
        echo "ğŸˆ Setting up Big 12 data collection..."
        echo "ğŸ“Š This workflow is ready for Big 12 team data when available"
        echo "ğŸ”§ Current focus: Database setup and data structure"
        
        # Run database setup if needed
        # node src/scripts/create-kash-database.js
        
        # TODO: Add Big 12 team data collection when available
        # node src/scripts/add-big12-teams-data.js
        
    - name: Notify on success
      if: success()
      run: |
        echo "âœ… Big 12 data seeding workflow ready at $(date)"
        echo "ğŸ“Š Workflow prepared for Big 12 teams and projection data"
        echo "ğŸ”§ Database structure verified and ready"
        
    - name: Notify on failure
      if: failure()
      run: |
        echo "âŒ Big 12 data seeding workflow failed at $(date)"
        echo "ğŸ” Check logs for configuration or API issues" 