<mxfile host="app.diagrams.net" modified="2025-09-03T00:10:00.000Z" agent="AI" version="22.0.0" editor="www.diagrams.net">
  <diagram id="draft-database-schema-board-generation" name="Draft Database Schema & Board Generation (Aligned to SSOT)">
    <mxGraphModel dx="1280" dy="720" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1920" pageHeight="1080" background="#FFFFFF">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <mxCell id="title" value="Draft Database Schema &amp; Board Generation (SSOT: schema/zod-schema.ts)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=22;fontStyle=1;fillColor=#ECFDF5;strokeColor=#059669;fontColor=#047857;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="40" y="20" width="1060" height="60" as="geometry"/>
        </mxCell>

        <!-- drafts (SSOT Drafts) -->
        <mxCell id="coll_drafts" value="drafts\n— leagueId\n— draftStatus ('pre-draft'|'drafting'|'post-draft')\n— currentRound?\n— currentPick?\n— maxRounds?\n— draftOrder? (JSON)\n— startTime?\n— endTime?\n— type? ('snake'|'auction'|'mock')\n— settings? (JSON)\n— participants? (JSON)\n— pickTimeSeconds?\n— autoPickEnabled?\n— commissioner?\n— season?\n— maxTeams? / currentTeams?\n— created? / updated?" style="shape=swimlane;startSize=28;rounded=1;html=1;fillColor=#FFFFFF;strokeColor=#047857;fontColor=#065F46;swimlaneFillColor=#D1FAE5;" vertex="1" parent="1">
          <mxGeometry x="40" y="110" width="380" height="360" as="geometry"/>
        </mxCell>

        <!-- draft_states (SSOT DraftStates) -->
        <mxCell id="coll_states" value="draft_states\n— draftId\n— onClockTeamId\n— deadlineAt?\n— round\n— pickIndex\n— draftStatus ('pre-draft'|'drafting'|'post-draft')" style="shape=swimlane;startSize=28;rounded=1;html=1;fillColor=#FFFFFF;strokeColor=#047857;fontColor=#065F46;swimlaneFillColor=#D1FAE5;" vertex="1" parent="1">
          <mxGeometry x="460" y="110" width="340" height="220" as="geometry"/>
        </mxCell>

        <!-- draft_events (SSOT DraftEvents) replaces draft_picks table listing -->
        <mxCell id="coll_events" value="draft_events\n— draftId\n— ts\n— type ('pick'|'autopick'|'undo'|'pause'|'resume')\n— teamId?\n— playerId?\n— round\n— overall\n— by?" style="shape=swimlane;startSize=28;rounded=1;html=1;fillColor=#FFFFFF;strokeColor=#047857;fontColor=#065F46;swimlaneFillColor=#D1FAE5;" vertex="1" parent="1">
          <mxGeometry x="840" y="110" width="360" height="240" as="geometry"/>
        </mxCell>

        <!-- roster_slots (no SSOT fields listed) -->
        <mxCell id="coll_slots" value="roster_slots (see live)" style="shape=swimlane;startSize=28;rounded=1;html=1;fillColor=#FFFFFF;strokeColor=#047857;fontColor=#065F46;swimlaneFillColor=#D1FAE5;" vertex="1" parent="1">
          <mxGeometry x="840" y="370" width="220" height="120" as="geometry"/>
        </mxCell>

        <!-- transactions (no SSOT fields listed) -->
        <mxCell id="coll_txn" value="transactions (see live)" style="shape=swimlane;startSize=28;rounded=1;html=1;fillColor=#FFFFFF;strokeColor=#047857;fontColor=#065F46;swimlaneFillColor=#D1FAE5;" vertex="1" parent="1">
          <mxGeometry x="1080" y="370" width="220" height="120" as="geometry"/>
        </mxCell>

        <!-- relationships -->
        <mxCell id="r1" edge="1" parent="1" source="coll_drafts" target="coll_states" style="endArrow=block;startArrow=oval;strokeColor=#065F46;"/>
        <mxCell id="r2" edge="1" parent="1" source="coll_drafts" target="coll_events" style="endArrow=block;startArrow=oval;strokeColor=#065F46;"/>
        <mxCell id="r3" edge="1" parent="1" source="coll_events" target="coll_slots" style="endArrow=block;strokeColor=#065F46;"/>
        <mxCell id="r4" edge="1" parent="1" source="coll_events" target="coll_txn" style="endArrow=block;strokeColor=#065F46;"/>

        <!-- Board generation pipeline aligned to events -->
        <mxCell id="board_title" value="Draft Board Generation (from draft_events)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=16;fontStyle=1;fillColor=#ECFDF5;strokeColor=#059669;fontColor=#047857;" vertex="1" parent="1">
          <mxGeometry x="40" y="500" width="500" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="b1" value="Fetch draft_events (type='pick')" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3F4F6;strokeColor=#374151;fontColor=#111827;" vertex="1" parent="1">
          <mxGeometry x="40" y="550" width="240" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="b2" value="Build Mermaid .md (rounds → picks)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3F4F6;strokeColor=#374151;fontColor=#111827;" vertex="1" parent="1">
          <mxGeometry x="300" y="550" width="240" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="b3" value="Save: docs/diagrams/draft-boards/" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3F4F6;strokeColor=#374151;fontColor=#111827;" vertex="1" parent="1">
          <mxGeometry x="560" y="550" width="240" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="b4" value="Update draft: board_asset_uri, board_md" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3F4F6;strokeColor=#374151;fontColor=#111827;" vertex="1" parent="1">
          <mxGeometry x="820" y="550" width="300" height="60" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>